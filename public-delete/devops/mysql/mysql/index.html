<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta http-equiv=Content-Security-Policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self' https://www.dropbox.com https://*.dl.dropboxusercontent.com https://photos.app.goo.gl https://drive.google.com https://photos.google.com https://video-downloads.googleusercontent.com https://*.googleusercontent.com https://*.googlevideo.com https://youtube.googleapis.com; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self' https://w.soundcloud.com https://www.youtube.com https://www.youtube-nocookie.com https://www.dropbox.com http://localhost https://www.dropbox.com http://darvein.local https://disqus.com; img-src 'self' https://photos.google.com https://lh3.googleusercontent.com https://www.dropbox.com https://*.dl.dropboxusercontent.com https://*.disqus.com https://c.disquscdn.com; object-src https://lh3.googleusercontent.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/ https://c.disquscdn.com; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://cdnjs.cloudflare.com https://www.googletagmanager.com https://www.dropbox.com http://localhost http://darvein.local https://drv21.disqus.com https://c.disquscdn.com; prefetch-src 'self' https://youtube.googleapis.com; connect-src 'self' https://www.google-analytics.com https://links.services.disqus.com;"><meta name=author content="Dennis Ruiz"><meta name=description content="Mysql tips Create user in AWS RDS and grant permissions like a master
CREATE USER 'jacob'@'%' IDENTIFIED BY 'xxxxxxxx'; GRANT SELECT,INSERT,UPDATE,DELETE,DROP on synapbox_qa.* TO 'jacob'@'%'; or GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, PROCESS, REFERENCES, INDEX, ALTER, SHOW DATABASES, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, LOAD FROM S3, SELECT INTO S3, INVOKE LAMBDA ON synapbox_qa."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Mysql tips Create user in AWS RDS and grant permissions like a master
CREATE USER 'jacob'@'%' IDENTIFIED BY 'xxxxxxxx'; GRANT SELECT,INSERT,UPDATE,DELETE,DROP on synapbox_qa.* TO 'jacob'@'%'; or GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, PROCESS, REFERENCES, INDEX, ALTER, SHOW DATABASES, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, LOAD FROM S3, SELECT INTO S3, INVOKE LAMBDA ON synapbox_qa."><meta property="og:title" content><meta property="og:description" content="Mysql tips Create user in AWS RDS and grant permissions like a master
CREATE USER 'jacob'@'%' IDENTIFIED BY 'xxxxxxxx'; GRANT SELECT,INSERT,UPDATE,DELETE,DROP on synapbox_qa.* TO 'jacob'@'%'; or GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, PROCESS, REFERENCES, INDEX, ALTER, SHOW DATABASES, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, LOAD FROM S3, SELECT INTO S3, INVOKE LAMBDA ON synapbox_qa."><meta property="og:type" content="article"><meta property="og:url" content="https://www.darvein.net/devops/mysql/mysql/"><meta property="article:section" content="devops"><title>Mysql tips </title><link rel=canonical href=https://www.darvein.net/devops/mysql/mysql/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.a1a7e7e7bd8b6629931805334fd6cf056ee6f154702847e6d597bbfe80446a0d.css integrity="sha256-oafn572LZimTGAUzT9bPBW7m8VRwKEfm1Ze7/oBEag0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.39e41a7f16bdf8cb16e43cae7d714fa1016f1d2d2898a5b3f27f42c9979204e2.css integrity="sha256-OeQafxa9+MsW5DyufXFPoQFvHS0omKWz8n9CyZeSBOI=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/custom.min.7cf8a329bb485491ed5be45bd286916c655bf66e11e3fe4d82649437eae8b51b.css integrity="sha256-fPijKbtIVJHtW+Rb0oaRbGVb9m4R4/5NgmSUN+rotRs=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.120.4"></head><body class="preload-transitions colorscheme-dark"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Darvein
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/infosec/>Infosec</a></li><li class=navigation-item><a class=navigation-link href=/coding/>Coding</a></li><li class=navigation-item><a class=navigation-link href=/devops/>Devops</a></li></ul></section></nav><div class=content><section class="container page"><article><h1 id=mysql-tips>Mysql tips
<a class=heading-link href=#mysql-tips><i class="fa fa-link" aria-hidden=true></i></a></h1><p><strong>Create user in AWS RDS and grant permissions like a master</strong></p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span>CREATE USER <span style=color:#0086d2>&#39;jacob&#39;</span>@<span style=color:#0086d2>&#39;%&#39;</span> IDENTIFIED BY <span style=color:#0086d2>&#39;xxxxxxxx&#39;</span>;
</span></span><span style=display:flex><span>GRANT SELECT,INSERT,UPDATE,DELETE,DROP on synapbox_qa.* TO <span style=color:#0086d2>&#39;jacob&#39;</span>@<span style=color:#0086d2>&#39;%&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>or
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, PROCESS, REFERENCES, INDEX, ALTER, SHOW DATABASES, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, LOAD FROM S3, SELECT INTO S3, INVOKE LAMBDA ON synapbox_qa.* TO <span style=color:#0086d2>&#39;jacob&#39;</span>@<span style=color:#0086d2>&#39;%&#39;</span> IDENTIFIED BY PASSWORD WITH GRANT OPTION
</span></span></code></pre></div><h4 id=need-to-check-all-the-queries-in-live-mode>Need to check all the queries in live mode?:
<a class=heading-link href=#need-to-check-all-the-queries-in-live-mode><i class="fa fa-link" aria-hidden=true></i></a></h4><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=display:flex><span>mysql&gt;<span style=color:#888> </span><span style=color:#fb660a;font-weight:700>SHOW</span><span style=color:#888> </span>VARIABLES<span style=color:#888> </span><span style=color:#fb660a;font-weight:700>LIKE</span><span style=color:#888> </span><span style=color:#0086d2>&#34;general_log%&#34;</span>;<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888></span>+<span style=color:#080;background-color:#0f140f;font-style:italic>------------------+----------------------------+
</span></span></span><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic></span>|<span style=color:#888> </span>Variable_name<span style=color:#888>    </span>|<span style=color:#888> </span>Value<span style=color:#888>                      </span>|<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888></span>+<span style=color:#080;background-color:#0f140f;font-style:italic>------------------+----------------------------+
</span></span></span><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic></span>|<span style=color:#888> </span>general_log<span style=color:#888>      </span>|<span style=color:#888> </span><span style=color:#fb660a;font-weight:700>OFF</span><span style=color:#888>                        </span>|<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888></span>|<span style=color:#888> </span>general_log_file<span style=color:#888> </span>|<span style=color:#888> </span>/var/run/mysqld/mysqld.log<span style=color:#888> </span>|<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888></span>+<span style=color:#080;background-color:#0f140f;font-style:italic>------------------+----------------------------+
</span></span></span><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic></span><span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888></span>mysql&gt;<span style=color:#888> </span><span style=color:#fb660a;font-weight:700>SET</span><span style=color:#888> </span><span style=color:#fb660a;font-weight:700>GLOBAL</span><span style=color:#888> </span>general_log<span style=color:#888> </span>=<span style=color:#888> </span><span style=color:#0086d2>&#39;ON&#39;</span>;<span style=color:#888>
</span></span></span><span style=display:flex><span><span style=color:#888></span>mysql&gt;<span style=color:#888> </span><span style=color:#fb660a;font-weight:700>SET</span><span style=color:#888> </span><span style=color:#fb660a;font-weight:700>GLOBAL</span><span style=color:#888> </span>general_log<span style=color:#888> </span>=<span style=color:#888> </span><span style=color:#0086d2>&#39;OFF&#39;</span>;<span style=color:#888>
</span></span></span></code></pre></div><h4 id=check-size-in-disk-on-each-table>Check size in disk on each table:
<a class=heading-link href=#check-size-in-disk-on-each-table><i class="fa fa-link" aria-hidden=true></i></a></h4><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#fb660a;font-weight:700>SELECT</span><span style=color:#888> 
</span></span></span><span style=display:flex><span><span style=color:#888>     </span>table_schema<span style=color:#888> </span><span style=color:#fb660a;font-weight:700>as</span><span style=color:#888> </span>`<span style=color:#fb660a;font-weight:700>Database</span>`,<span style=color:#888> 
</span></span></span><span style=display:flex><span><span style=color:#888>     </span><span style=color:#fb660a;font-weight:700>table_name</span><span style=color:#888> </span><span style=color:#fb660a;font-weight:700>AS</span><span style=color:#888> </span>`<span style=color:#fb660a;font-weight:700>Table</span>`,<span style=color:#888> 
</span></span></span><span style=display:flex><span><span style=color:#888>     </span>round(((data_length<span style=color:#888> </span>+<span style=color:#888> </span>index_length)<span style=color:#888> </span>/<span style=color:#888> </span><span style=color:#0086f7;font-weight:700>1024</span><span style=color:#888> </span>/<span style=color:#888> </span><span style=color:#0086f7;font-weight:700>1024</span>),<span style=color:#888> </span><span style=color:#0086f7;font-weight:700>2</span>)<span style=color:#888> </span>`<span style=color:#fb660a;font-weight:700>Size</span><span style=color:#888> </span><span style=color:#fb660a;font-weight:700>in</span><span style=color:#888> </span>MB`<span style=color:#888> 
</span></span></span><span style=display:flex><span><span style=color:#888></span><span style=color:#fb660a;font-weight:700>FROM</span><span style=color:#888> </span>information_schema.TABLES<span style=color:#888> 
</span></span></span><span style=display:flex><span><span style=color:#888></span><span style=color:#fb660a;font-weight:700>ORDER</span><span style=color:#888> </span><span style=color:#fb660a;font-weight:700>BY</span><span style=color:#888> </span>(data_length<span style=color:#888> </span>+<span style=color:#888> </span>index_length)<span style=color:#888> </span><span style=color:#fb660a;font-weight:700>DESC</span>;<span style=color:#888>
</span></span></span></code></pre></div><h4 id=ssh-mysql-tunnel>SSH Mysql tunnel
<a class=heading-link href=#ssh-mysql-tunnel><i class="fa fa-link" aria-hidden=true></i></a></h4><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic># RDS Mysql</span>
</span></span><span style=display:flex><span>ssh -t -N -L 3306:acmeorgdb-staging.cluster-xxxxxx.us-east-1.rds.amazonaws.com:3306 -i ~/.ssh/acmeorg-devops.pem ubuntu@<span style=color:#fb660a>$HOST</span>
</span></span><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic># then in a new terminal</span>
</span></span><span style=display:flex><span>mysql -h 127.0.0.1 -u dbuser -p
</span></span></code></pre></div><h4 id=check-collation>Check collation
<a class=heading-link href=#check-collation><i class="fa fa-link" aria-hidden=true></i></a></h4><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#fb660a;font-weight:700>SHOW</span><span style=color:#888> </span>VARIABLES<span style=color:#888> </span><span style=color:#fb660a;font-weight:700>LIKE</span><span style=color:#888> </span><span style=color:#0086d2>&#39;%collation%&#39;</span>;<span style=color:#888>
</span></span></span></code></pre></div><h4 id=others>Others
<a class=heading-link href=#others><i class="fa fa-link" aria-hidden=true></i></a></h4><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic># check how to create an existing table
</span></span></span><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic></span><span style=color:#fb660a;font-weight:700>show</span><span style=color:#888> </span><span style=color:#fb660a;font-weight:700>create</span><span style=color:#888> </span><span style=color:#fb660a;font-weight:700>table</span><span style=color:#888> </span>serpTermStrategy<span style=color:#888>
</span></span></span></code></pre></div><h2 id=good-to-know>Good to know
<a class=heading-link href=#good-to-know><i class="fa fa-link" aria-hidden=true></i></a></h2><ul><li><code>mysqldump</code> can dump data and compress it with different algorithms and levels of preset.</li></ul></article></section></div><footer class=footer><section class=container>©
2021 -
2024
Dennis Ruiz
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.236049395dc3682fb2719640872958e12f1f24067bb09c327b233e6290c7edac.js integrity="sha256-I2BJOV3DaC+ycZZAhylY4S8fJAZ7sJwyeyM+YpDH7aw="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-6CQZY8W0WD"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6CQZY8W0WD")</script><script>$(document).on("input propertychange paste change",".FilterSearch",function(){var n=$(this).val().toLowerCase(),s=$(this).closest("ul"),t=s.find("li:gt(0)");t.hide(),t.filter(function(){var e=$(this).text().toLowerCase();return e.indexOf(n)>=0}).show()})</script></body></html>